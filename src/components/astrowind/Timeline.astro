---
// Timeline component - Astrowind style
export interface TimelineEntry {
  period: string;
  subtitle?: string;
  body?: string;
  status?: 'todo' | 'in-progress' | 'done';
}

interface Props {
  title?: string;
  subtitle?: string;
  entries: TimelineEntry[];
}

const { title, subtitle, entries } = Astro.props;

const getStatusColor = (status?: string) => {
  switch (status) {
    case 'done':
      return 'bg-green-500 border-green-500';
    case 'in-progress':
      return 'bg-purple-500 border-purple-500 animate-pulse';
    case 'todo':
    default:
      return 'bg-gray-300 border-gray-300 dark:bg-gray-600 dark:border-gray-600';
  }
};
---

<section class="py-16 md:py-24">
  <div class="container mx-auto px-4">
    {(title || subtitle) && (
      <div class="text-center mb-12 md:mb-16">
        {title && (
          <h2 class="text-3xl md:text-4xl font-bold mb-4">
            {title}
          </h2>
        )}
        {subtitle && (
          <p class="text-lg text-gray-600 dark:text-gray-400 max-w-2xl mx-auto">
            {subtitle}
          </p>
        )}
      </div>
    )}

    <div class="relative max-w-4xl mx-auto">
      <!-- Timeline line -->
      <div class="hidden md:block absolute left-1/2 transform -translate-x-1/2 h-full w-0.5 bg-gray-200 dark:bg-gray-700"></div>

      {entries.map((entry, index) => (
        <div class={`relative mb-8 ${index % 2 === 0 ? 'md:pr-1/2' : 'md:pl-1/2'}`}>
          <div class={`flex items-center mb-4 ${index % 2 === 0 ? 'md:flex-row-reverse md:text-right' : ''}`}>
            <!-- Timeline dot -->
            <div class={`hidden md:flex absolute left-1/2 transform -translate-x-1/2 w-4 h-4 rounded-full border-4 ${getStatusColor(entry.status)}`}></div>
            
            <div class={`w-full ${index % 2 === 0 ? 'md:pr-12' : 'md:pl-12'}`}>
              <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md border border-gray-200 dark:border-gray-700">
                <!-- Mobile dot -->
                <div class={`md:hidden inline-block w-3 h-3 rounded-full mr-2 ${getStatusColor(entry.status)}`}></div>
                
                <h3 class="text-xl font-semibold mb-2 inline-block">{entry.period}</h3>
                {entry.subtitle && (
                  <p class="text-purple-600 dark:text-purple-400 font-medium mb-2">
                    {entry.subtitle}
                  </p>
                )}
                {entry.body && (
                  <p class="text-gray-600 dark:text-gray-400">
                    {entry.body}
                  </p>
                )}
              </div>
            </div>
          </div>
        </div>
      ))}
    </div>
  </div>
</section>
