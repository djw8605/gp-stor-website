---
import type { Post } from '~/types';

export interface Props {
  post: Post;
}

const { post } = Astro.props;

// Format the date
const eventDate = post.publishDate;
const month = eventDate.toLocaleDateString('en-US', { month: 'short' }).toUpperCase();
const day = eventDate.getDate();
const year = eventDate.getFullYear();
---

<a href={post.permalink} class="block no-underline">
  <article class="mb-6 transition border border-gray-200 dark:border-slate-700 rounded-lg p-4 hover:shadow-lg">
    <div class="flex gap-4">
    <!-- Date Badge -->
    <div class="flex-shrink-0 flex flex-col items-center justify-center bg-primary text-white rounded-lg w-16 h-16 text-center">
      <div class="text-xs font-bold">{month}</div>
      <div class="text-2xl font-bold leading-none">{day}</div>
      <div class="text-xs">{year}</div>
    </div>
    
    <!-- Event Details -->
    <div class="flex-1 min-w-0">
      <h3 class="mb-1 text-lg font-bold leading-tight font-heading">
        <span class="hover:text-primary dark:hover:text-blue-700 transition ease-in duration-200">{post.title}</span>
      </h3>
      {post.location && (
        <p class="text-sm text-gray-600 dark:text-slate-400 mb-1">
          <svg class="inline-block w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
          </svg>
          {post.location}
        </p>
      )}
      <p class="text-muted dark:text-slate-400 text-sm line-clamp-2">{post.excerpt}</p>
      {post.tags && post.tags.length > 0 && (
        <div class="mt-2 flex flex-wrap gap-1">
          {post.tags.slice(0, 3).map((tag: { title: string; slug: string }) => (
            <span class="inline-block bg-gray-100 dark:bg-slate-800 text-gray-700 dark:text-slate-300 text-xs px-2 py-1 rounded">
              {tag.title}
            </span>
          ))}
        </div>
      )}
    </div>
    </div>
  </article>
</a>
